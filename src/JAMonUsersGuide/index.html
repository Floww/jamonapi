<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8"/>
<meta name="keywords" lang="en-us" content="java, performance tuning, monitor, bottleneck, scale, scalability, monitoring tools, page hits, page counter, currentTimeMillis, benchmark, jamonapi, free, freeware, shareware, open source, measure, fdsapi, formatteddataset, servlet filter">
<meta name="description" content="The Java Application Monitor (JAMon) is a free, simple, high performance, thread safe, Java API that allows developers to easily monitor production applications.">
<title>JAMon - Documentation</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="jamon_docs.css">

</head>


<p align="center">
<img src="jamon1.jpg" id="fdsbanner1" border="0" /></a>
</p>

<h1 align='center'>JAMon (Java Application Monitor) Users Guide</h1>
<h2 align='center'>A Monitoring API</h2>


<!-- START JAMON SPECIFIC HTML -->
<body>
<div class="container">


<p>The table of contents for JAMon documentaiton follows:</p>

<ol>
    <li>JAMon is now on Maven.  The Maven pom dependency follows (substitute the appropriate version):</li>
    
    <pre>
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId>com.jamonapi&lt;/groupId&gt;
            &lt;artifactId>jamon&lt;/artifactId&gt;
            &lt;version>2.80&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    </pre>

	   <li>JAMon Videos - Short YouTube videos showing how to use JAMon</li>
        <ol type="a">
         <li><a href="http://youtu.be/zzKvI6otyMQ">Monitoring Distributed Applications with JAMon</a></li>
         <li><a href="http://www.youtube.com/watch?v=fKooex0ZPcw">JAMon 101</a> - An intro video to JAMon. Shows how to use start/stop/add and also other highlights of using JAMon.</li>
         <li><a href="http://www.youtube.com/watch?v=BfIuoy8mP5c">JAMon GUI</a> - Shows how to access the information in JAMon via the JAMon WAR. Also shows data captured by the JAMon servlet filter and JDBC Proxy driver.</li>
         <li><a href="http://www.youtube.com/watch?v=Drf3d9m5zss">JAMon Operating System monitoring</a> -  Monitor your unix/linux/mac scripts with JAMon. Introduced in JAMon 2.72.</li>
        </ol>
	<li>Quick Links</li>
		<ol type="a">
		<li><a href="http://sourceforge.net/project/showfiles.php?group_id=96550">Download JAMon</a></li>
        <li><a href="https://sourceforge.net/p/jamonapi/discussion/334830/">Get support for JAMon</a></li>
		<li><a href="javadoc/index.html">JAMon JavaDocs</a></li>
		<li><a href="https://sourceforge.net/p/jamonapi/jamonapi/ci/master/tree/">JAMon Source Code</a></li>
		<li><a href="presentation/jamon.htm">JAMon Slides (html)</a></li>
		<li><a href="jamon_22.ppt">JAMon 2.2 Slides (powerpoint)</a></li>
		<li><a href="http://www.fdsapi.com">FormattedDataSet HomePage</a></li>
       <li><a href="http://sourceforge.net/project/project_donations.php?group_id=96550">Donate to JAMon</a></li>
		</ol>
    <li><a href="spring_aop_monitoring.html">Monitoring Spring using JAMon and AOP (2.76)</a></li>

                
       <li>What's new in JAMon 2.7?</li>
	<ol type="a">
	<li><a href="http_monitoring.html">HTTP Monitoring (Tomcat, Jboss, Jetty, Servlet filter)</a></li>
	<li><a href="#ejbmonitoring">Monitoring EJB's with the JAMon EJB Interceptor</a></li>
       </ol>
                
	<li><a href="log4j_jamonappender.html">What's new in JAMon 2.6? -Introducing Log4j JAMon Appenders</a></li>
	<li><a href="jamonlisteners.html">What's new in JAMon 2.4 and 2.5 - JAMonListeners</a></li>
	<li><a href="#WhatsNew22">What's new in JAMon 2.2 and 2.3?</a></li>
		<ol type="a">
		<li><a href="#WhatsNew22">The JAMon JDBC Proxy driver</a></li>
		</ol>
	<li><a href="#WhatsNew21">What's new in JAMon 2.1?</a></li>
		<ol type="a">
		<li><a href="#monitoringinterfaces">Monitoring Interfaces</a></li>
		<li><a href="#monitoringinterfacesmethodcalls">Monitoring Interfaces - Method Calls (JAMon Summary Statistics)</a></li>
                <li><a href="#monitoringinterfacesexceptionssumm">Monitoring Interfaces - Exceptions (JAMon Summary Statistics)</a></li>
		<li><a href="#monitoringinterfacesexceptionsdetails">Monitoring Interfaces - Exceptions (Exception Details)</a></li>
		<li><a href="#monitoringinterfacesexceptionnote">Monitoring Interfaces - Note on Exception Monitoring</a></li>
		<li><a href="#monitoringinterfacesjdbc">Monitoring Interfaces - JDBC Interfaces</a></li>
		<li><a href="#monitoringsqlcommands">Monitoring SQL Commands</a></li>
		<li><a href="#monitoringsqlcommandssumm">Monitoring SQL Commands (JAMon Summary Statistics)</a></li>
		<li><a href="#monitoringsqlcommandsdetails">Monitoring SQL Commands (SQL Details)</a></li>
		<li><a href="#jamonmisc">JAMon 2.1 Miscellaneous</a></li>
		</ol>
	<li><a href="#ServletFilter">The JAMon servlet filter</a> - A no code solution to monitoring your Java web application in 5 minutes!</li>
                <ol type="a">
                <li><a href="#JAMonWAR">The JAMon Web Application (WAR)</a> - Viewing JAMon stats via jamonadmin.jsp</li>
                </ol>
	<li>JAMon examples</li>
		<ol type="a">
		<li><a href="#SimpleExamples">Simple Example</a></li>
		</ol>
	<li><a href="#ManagingJAMon">Managing JAMon - jamonadmin.jsp</a></li>
        <ol type="a">
        <li><a href="#JAMonReport">The JAMon Report</a></li>
        <li><a href="#MeasuringOutliers">Measuring outliers (JAMon Time Ranges)</a></li>
        <li><a href="#ControllingJAMon">Controlling JAMon</a></li>
        </ol>
	<li><a href="#SampleCode">Sample Code</a></li>
	<li><a href="#DownloadingJAMon">Downloading JAMon</a></li>
	<li><a href="#Support">Support</a></li>
</ol>

<h2><a name="Introduction">JAMon Introduction</a></h2>

<p>The Java Application Monitor (JAMon) is a free, simple, high performance, thread safe, Java API
    that allows developers to easily monitor production applications.
    </p>

    <ul>
        <li>JAMon allows developers to track their applications
            performance and behavior using predefined modules.  There are modules that automatically monitor
            : SQL, HTTP page requests, Spring beans, method invocations, Log4j, and Exceptions.  Other modules are often easy to build.</li>
        <li>JAMon keeps track of the following metrics for any of the items it tracks in the modules: hits, total, average,
        min, max and concurrency (average, max, current/active) to name a few.</li>
        <li>JAMon is fast and doesn't consume much memory and so it is suitable for production environments.</li>
        <li>JAMon statistics, stack traces and more are viewable from the <a href="jamon_war.html">JAMon war</a>, JMX and are also accessible via the JAMon API.</li>
    </ul>

    <p>In addition to using modules developers can monitor anything the modules don't cover by using JAMon's simple API methods 'start/stop' and 'add'.</p>


    <p>Of course nobody wants to litter their code with calls to add and stop, so when possible JAMon monitoring modules should be used as they allow the easiest monitoring.
        JAMon was developed primarily for monitoring web applications, however JAMon can be used in any JDK 1.6 or higher environment.
    </p>

    <p>Feel free to continue reading the user's guide or <a href="http://sourceforge.net/project/showfiles.php?group_id=96550">download JAMon</a>
        and read the <a href="javadoc/index.html">Java Docs</a>.</p>



    <h2><a name="letsstart">How do I monitor my application?</a></h2>

    <p>JAMon comes with several ways to monitor your application that require no application code changes.  Usually all that is required is to...
    <ul>
        <li>add a line to an xml file,</li>
        <li>put the jamon jar file in your classpath, </li>
        <li>and install the JAMon war to view JAMon metrics/monitors (or you
            can view the metrics in a JMX console like jconsole).</li>
    </ul>
    See <a href="http_monitoring.html">HTTP Monitoring</a> for directions on how to monitor page requests in your web server.
    You could be monitoring your code in a few minutes.  Happy monitoring!
    </p>

    <p>Below are some quick links that show how to enable other types of monitoring and explain other aspects of JAMon:
    <ul>

        <li><a href="distributed_jamon.html">Distributed Application Monitoring</a> - View all the data from your organizations applications from a central monitoring web application (the JAMon web application).</li>
        <li><a href="http_monitoring.html">HTTP Monitoring</a> - Monitor requests/responses to Tomcat, Jetty, JBoss or any other JAVA web container. Track page execution times, status codes,
            bytes sent, exceptions thrown and more.  Alternatively if you would like to monitor only your Web app and not the whole server you can
            use the <a href="jamon_servlet_filter.html">JAMonFilter</a> servlet filter or easily create your own.</li>
        <li><a href="spring_aop_monitoring.html">Spring Monitoring</a> - Monitor any Spring bean.  Track method invocations, arguments passed to methods, and  exceptions thrown.</li>
        <li><a href="#monitoringsqlcommands">JDBC/SQL monitoring</a> - via the JAMon JDBC proxy driver (works with any other JDBC driver). Track SQL called, JDBC method calls, exceptions thrown and more.</li>
        <li><a href="log4j_jamonappender.html">Log4j Monitoring</a> -  Monitor via the JAMon log4j Appender.  Track counts for ERROR, INFO, WARNING etc.  'Tail' the Log4j log from the JAMon web application</li>
        <li><a href="#ejbmonitoring">EJB3 Monitoring</a> - Monitor EJBs using the JAMon EJB interceptor.</li>
        <li><a href="jmx_jamon.html">JAMon JMX</a> - View JAMon data in a JMX tool like jconsole and visualvm. (2.80+)</li>
    </ul>
    </p>

<h2><a name="simpleexample">API Examples - start/stop and add</a></h2>

    <p><strong>MonitorFactory.start("myLabel");</strong> - The start/stop methods time any code that they surround.

    <div class='indent'>
     <pre>
        import com.jamonapi.*;
        ...
        Monitor mon=MonitorFactory.start("myFirstMonitorLabel"); // using Strings is flexible as they can represent anything.
        ...Code Being Timed...
        mon.stop();
     </pre>
    "myFirstMonitorLabel" can be replaced by strings that represent...
        <ul>
         <li>Page names - "/mydirectory/myfantasticpage.jsp"</li>
         <li>SQL statements - "select * from myawesometable"</li>
         <li>or anything else you would like to time.</li>
        </ul>
    <p>JAMon keeps the label and units as a key in a Map and every time start or add are called with the
        same key JAMon updates statistics for: hits, total, average, min, max and concurrency (average, max, current/active) to name a few.</p>
    </div>


    <p><strong>MonitorFactory.add("myLabel", "myUnits", myValue);</strong>Sometimes developers are interested
        in counting the frequency of items (such as exceptions, or page requests with a certain status code).
        In addition they are interested in measuring other concepts such as how many bytes are sent/received,
        or how much free memory there is.  JAMon provides the 'add' method to handle these situations.
    </p>
    <div class='indent'>

      <pre>
        import com.jamonapi.*;
        ...
        double myValue=...
        MonitorFactory.add("myBytesSentLabel", "MB", myValue); // units can be any string, and myValue can be any numeric
       </pre>
     </div>

    <p>Link to another <a href="additional_example.html">simple example.</a></p>




 

<h2><a name="ejbmonitoring">1. What's new in JAMon 2.7? HTTP and EJB Monitoring</a></h2>

    <p>JAMon 2.7 introduces the ability to monitor HTTP requests in web containers such as Tomcat, JBoss, and Jetty.   This monitoring is achieved with no code changes
    required by developers.  See <a href="http_monitoring.html">HTTP Monitoring with JAMon</a> for more information.</p>
    
   <p>JAMon 2.7 also introduces EJB monitoring.  Any EJB3 methods as well as any exceptions they throw will be monitored.   The information can be viewed in /jamon/jamonadmin.jsp.  EJB requires no
   coding changes to your EJBs.  Simply follow these steps to enable the EJB interceptor on your app server:</p>
   
    <ul>
        <li>Make jamon-2.7.jar (or higher) available to your app server </li>
        <li>Install jamon.war (or higher), so you can view the statistics. </li>
        <li>Put the following information in your ejb-jar.xml file. This will monitor all EJBs.  You may </li>
           <ul><pre  class="pre-scrollable">
&lt;?xml version="1.0" encoding="UTF-8"?r&gt
&lt;ejb-jar version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"&gt;
    &lt;assembly-descriptor&gt;
      &lt;!-- Default interceptor that will apply to all methods for all beans in deployment --&gt;
      &lt;interceptor-binding&gt;
         &lt;ejb-name&gt;*&lt;/ejb-name&gt;
         &lt;interceptor-class&gt;com.jamonapi.aop.JAMonEJBInterceptor&lt;/interceptor-class&gt;
      &lt;/interceptor-binding&gt;
    &lt;/assembly-descriptor&gt;
&lt;/ejb-jar&gt;
</pre>
           </ul>
    </ul>



 
    <h2><a name="monitoringinterfaces">3.a Monitoring Interfaces</a></h2>


    <p>With one line of code you can monitor ANY java interface.  Any interface means you can easily monitor 
     standard java interfaces such as JDBC, open source interfaces such as the log4J appender interface or your own custom interfaces.   
     To monitor an interface you simply have to call the following JAMon method:</p>

    <pre  class="pre-scrollable">

import com.jamonapi.proxy.*;

// The MyObject() class has to implement MyInterface for monitoring to work.
MyInterface myObject = (MyInterface) MonProxyFactory.monitor(new MyObject());
myObject.myMethod();// method call will be monitored with JAMon.
</pre>


<p>That's it!  Simply make method calls to myObject as you normally would, and the calls will be monitored.  (Note it is best to hide the use of JAMon in a monitoring class of your own 
creation).</p>

<h2><a name="monitoringinterfacesmethodcalls">3.b Monitoring Interfaces - Method Calls (JAMon Summary Statistics)</a></h2>


    <p>JAMon summary statistics such as hits, time statistics (avg,total,min,max), concurrency statistics and more will be tracked for all
    of methods of the interface.  The JAMon label for monitoring of interface method calls always begins with: <b>MonProxy-Interface</b>.  JAMon statistics are viewable via the jamonadmin.jsp page in jamon.war 
    (discussed later).  The following is an example of the JAMon label associated with the Connection classes close() method.  Note the JAMon label consists of the 
    concrete class as well as the interfaces method signature.</p>  

	    <pre  class="pre-scrollable">
MonProxy-Interface (class=org.hsqldb.jdbcConnection): public abstract void java.sql.Connection.close() throws java.sql.SQLException</pre>

    <p>Interface summary statistics are viewable via jamonadmin.jsp.  
   </p>

    <h2><a name="monitoringinterfacesexceptionssumm">3.c Monitoring Interfaces - Exceptions (JAMon Summary Statistics)</a></h2>


    <p>JAMon summary statistics are kept whenever a monitored interface throws an Exception. 
    </p>
    
    <p>Any time a monitored interface throws an exception several JAMon summary records will be added. JAMon labels for Exception summary statistics 
    begin with:  <b>MonProxy-Exception</b>.  These summary statistics allow developers to easily see how many Exceptions the application has thrown. For 
    each exception that the interface throws the the following three types of JAMon summary labels will appear in the report.</p>

    <ul>
    <li>How many Exceptions were thrown by all monitored interfaces.  This allows you to easily see how many Exceptions your applications have thrown as well 
      as when it last threw one - MonProxy-Exception: InvocationTargetException
    <li>How many Exceptions of each exception type was thrown.  For SQL exceptions the ErrorCode and SQLState are also added.  This will be discussed further 
	below. Example - MonProxy-Exception: Root cause exception=java.sql.SQLException,ErrorCode=-22,SQLState=S0002
    <li>How many exceptions were thrown by each method of the monitored interfaces.  Example - 
	MonProxy-Exception: (class=org.hsqldb.jdbcStatement) Exception: public abstract java.sql.ResultSet java.sql.Statement.executeQuery(java.lang.String) throws java.sql.SQLException
    </ul>

    <p>Exception summary statistics are viewable via jamonadmin.jsp.</p>


<h2><a name="monitoringinterfacesexceptionsdetails">3.d Monitoring Interfaces - Exceptions (Exception Details)</a></h2>

    <p>The details of the N most recent Exceptions thrown by monitored interfaces (including the stack trace) are kept in a 
    rolling buffer and viewable via exceptions.jsp. The exception buffer size is configurable via the web page, and defaults to the most 
    recent 50 exceptions.  Typically such stack trace information is only available in a log which a developer might not have access to and 
    even if they do the log must be parsed to view the stack traces.</p>

   <p>Each row in the report represents a recent Exception thrown from a monitored inteface. Each row contains the following columns</p>

    <ul>
    <li><b>ID</b> - An increasing integer that indicates the number of the exception since the server was last booted.
    <li><b>StartTime</b> - The time the exception was thrown
    <li><b>ExceptionStackTrace</b> - The stack trace of the exception.
    <li><b>MethodName</b> - The method name of the monitored interfaces method that threw the exception 
    </ul>
    
    <p>Exception details statistics are viewable via exceptions.jsp.</p>



<h2><a name="monitoringinterfacesexceptionnote">3.e Monitoring Interfaces - Note on Exception Monitoring</a></h2>


    <p>One nice thing about Exception monitoring is that even when developers gobble/hide exceptions in the following manner they 
    will show up in the JAMonAdmin report and exception detail report.  The following example is taken from the JAMon demo. </p>  

    <pre  class="pre-scrollable">

  // Throw an exception and show that it is also monitored in jamonadmin.jsp and exceptions.jsp
  // Note also even though the catch block is empty it will show up in these pages.
  try { 
   // get a query to throw an Exception.  If enabled will show in jamon report and sql details.
   st.executeQuery("select * from i_do_not_exist");  

  } catch (Exception e) {} 
</pre>



    
<h2><a name="JAMonLicense">15. JAMon License Agreement</a></h2>
    <p>JAMon has a very liberal license. The spirit of the license is that there are no restrictions on its use.  Should something not
be clear in the license please to contact <a href="mailto:admin@jamonapi.com">admin@jamonapi.com</a>. 
In general JAMon binaries can be used free of charge in any
software (commercial software too), and JAMon source code may be modified.
The <a href="JAMonLicense.html" target="_blank">JAMon License</a> was adapted from the <a href='http://www.opensource.org/licenses/bsd-license.php'>BSD license.</a>
</p>

    
<p align="center">
<a href="http://www.fdsapi.com"><img src="fds_logo_fulltext_blue2_150.jpg"
id="fdsbanner" border="1" /></a>
<a href="http://sourceforge.net"><img src="http://sourceforge.net/sflogo.php?group_id=96550&amp;type=4" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
<a href="http://www.jamonapi.com"><img src="jamon_banner3.jpg"
id="jamonbanner" border="1" /></a>
</p>

<!-- END JAMON SPECIFIC HTML -->
</div>
</body>
</html>
